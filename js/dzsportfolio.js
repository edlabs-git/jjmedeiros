(function(f){f.fn.prependOnce=function(c,m){var k=f(this[0]);1>k.children(m).length&&k.prepend(c)};f.fn.appendOnce=function(c,m){var k=f(this[0]);1>k.children(m).length&&k.append(c)};f.fn.dzsportfolio=function(c){c=f.extend({settings_slideshowTime:"5",settings_autoHeight:"on",settings_skin:"skin-default",settings_mode:"masonry",settings_disableCats:"off",settings_clickaction:"none",title:"",design_item_width:"0",design_item_height:"0",design_item_height_same_as_width:"off",design_thumbw:"100%",design_thumbh:"180",design_categories_pos:"top",settings_ajax_enabled:"off",settings_ajax_loadmoremethod:"scroll",settings_ajax_pages:[],settings_lightboxlibrary:"zoombox",settings_preloadall:"off",disable_itemmeta:"off",wall_settings:{},audioplayer_swflocation:"ap.swf",videoplayer_swflocation:"preview.swf"},c);this.each(function(){function m(){0<b.children(".selector-con").length&&(x="on");"top"==c.design_categories_pos?(b.prependOnce('<div class="selector-con"><div class="clear"></div></div>',".selector-con"),b.appendOnce('<div class="pageContent"></div>',".pageContent")):(b.appendOnce('<div class="selector-con"><div class="clear"></div></div>',".selector-con"),b.prependOnce('<div class="pageContent"></div>',".pageContent"));p=b.children(".selector-con");y=b.children(".items");g=b.children(".pageContent");""!=c.title&&p.prepend('<div class="portfolio-title">'+c.title+"</div>");b.find(".portitem-tobe").each(function(){var a=jQuery(this),b=0,e=0;0!=c.design_item_width&&(b=c.design_item_width);0!=c.design_item_height&&(e=c.design_item_height);void 0!=a.attr("data-forcewidth")&&(b=a.attr("data-forcewidth"));void 0!=a.attr("data-forceheight")&&a.css("height",a.attr("data-forceheight"));0!=b&&a.css("width",b);0!=e&&a.css("height",e);b="thumb";"gallery"==a.attr("data-typefeaturedarea")&&(b="gallery");"audio"==a.attr("data-typefeaturedarea")&&(b="audio");"video"==a.attr("data-typefeaturedarea")&&(b="video");"youtube"==a.attr("data-typefeaturedarea")&&(b="video",a.attr("data-videotype","youtube"));"vimeo"==a.attr("data-typefeaturedarea")&&(b="video",a.attr("data-videotype","vimeo"));"testimonial"==a.attr("data-typefeaturedarea")&&(b="testimonial");"link"==a.attr("data-typefeaturedarea")&&(b="thumb",a.attr("donotopenimageinlightbox","on"),a.attr("data-bigimage",a.attr("data-link")));a.addClass("type-"+b);q=c.design_thumbw;"-1"==String(c.design_thumbw).indexOf("%")&&(q=c.design_thumbw+"px");l=c.design_thumbh;"-1"==String(c.design_thumbh).indexOf("%")&&(l=c.design_thumbh+"px");void 0!=a.attr("data-forcethumbwidth")&&(q=a.attr("data-forcethumbwidth"),"-1"==a.attr("data-forcethumbwidth").indexOf("%")&&"-1"==a.attr("data-forcethumbwidth").indexOf("px")&&(q=a.attr("data-forcethumbwidth")+"px"));void 0!=a.attr("data-forcethumbheight")&&(l=a.attr("data-forcethumbheight"),"-1"==a.attr("data-forcethumbheight").indexOf("%")&&"-1"==a.attr("data-forcethumbheight").indexOf("px")&&(l=a.attr("data-forcethumbheight")+"px"));if("gallery"==b||"audio"==b||"testimonial"==b)l="auto";var e="width: "+q+";",d="height: "+l+";";if("NaNpx"==q||0==l||""==l)e="";if("NaNpx"==l||0==l||""==l)d="";a.prepend('<div class="the-feature-con" style="'+e+d+'"><div class="the-overlay"></div></div>');if("gallery"==b){d='<div class="the-feature advancedscroller skin-inset type-'+b+'" style=""><ul class="items">';e=a.find(".the-feature-data").eq(0).children().length;for(h=0;h<e;h++)d+='<li class="item-tobe needs-loading"></li>';a.find(".the-feature-con").eq(0).prepend(d+"</ul></div>");for(h=0;h<e;h++)d=a.find(".the-feature-data").eq(0).children().eq(0),a.find(".the-feature").eq(0).find(".items").eq(0).children().eq(h).append(d);a.find(".the-overlay").hide();void 0!=jQuery.fn.advancedscroller?a.find(".the-feature").eq(0).advancedscroller({settings_mode:"onlyoneitem",design_arrowsize:"0",settings_swipe:"on",settings_swipeOnDesktopsToo:"on",settings_slideshow:"on",settings_slideshowTime:"8",design_bulletspos:"none"}):window.console&&console.info("dzsportfolio.js - warning: advancedscroller not included")}"audio"==b&&(d='<div class="the-feature audioplayer-tobe skin-default type-'+b+'" style=""  data-source="'+a.attr("data-thumbnail")+'">',d+="</div>",a.find(".the-feature-con").eq(0).prepend(d),a.find(".the-overlay").hide(),"function"==typeof dzsap_init?dzsap_init(a.find(".the-feature").eq(0),{autoplay:"off",swf_location:c.audioplayer_swflocation}):window.console&&console.info("dzsportfolio.js - warning: audio player not included"));"video"==b&&(d='<div class="the-feature vplayer-tobe skin_pro type-'+b+'" style=""  data-src="'+a.attr("data-thumbnail")+'"',void 0!=a.attr("data-sourceogg")&&(d+=' data-sourceogg="'+a.attr("data-sourceogg")+'"'),void 0!=a.attr("data-videotype")&&(d+=' data-type="'+a.attr("data-videotype")+'"'),d+=">",d+="</div>",a.find(".the-feature-con").eq(0).prepend(d),a.find(".the-overlay").hide(),void 0!=jQuery.fn.vPlayer?(e={autoplay:"off",videoWidth:"100%",videoHeight:180,constrols_out_opacity:0.9,constrols_normal_opacity:0.9,settings_hideControls:"off",settings_swfPath:c.videoplayer_swflocation},a.find(".the-feature").eq(0).vPlayer(e)):window.console&&console.info("dzsportfolio.js - warning: video player not included"));"testimonial"==b&&(a.find(".the-feature-con").eq(0).prepend('<div class="the-feature type-'+b+'" style=""></div>'),a.find(".the-overlay").hide(),a.find(".the-feature").eq(0).prepend(a.find(".the-feature-data").eq(0)));"thumb"==b&&(void 0!=a.attr("data-thumbnail")&&""!=a.attr("data-thumbnail")?a.find(".the-feature-con").eq(0).prepend('<div class="the-feature" style="background-image: url('+a.attr("data-thumbnail")+');"></div>'):a.find(".the-feature-con").eq(0).prepend(a.find(".the-feature-content").eq(0)));b=0;void 0!=a.attr("data-bigimage")&&""!=a.attr("data-bigimage")&&(e=" zoombox","zoombox"==c.settings_lightboxlibrary&&(e=" zoombox"),d="","prettyphoto"==c.settings_lightboxlibrary&&(d=' rel="prettyPhoto[zoomfolio]"'),"on"==a.attr("data-donotopenbigimageinzoombox")&&(d=e=""),a.find(".the-overlay").eq(0).append('<a class="the-overlay-anchor'+e+'" href="'+a.attr("data-bigimage")+'"'+d+"></a>"),a.find(".the-overlay").eq(0).find(".the-overlay-anchor").append('<div class="plus-image"></div>'),"prettyphoto"==c.settings_lightboxlibrary&&a.find(".the-overlay").eq(0).find(".the-overlay-anchor").append('<img class="aux-prettyPhoto-thumb" src="'+a.attr("data-thumbnail")+'" alt="thumbnail"/>'),b+=31);void 0!=a.attr("data-link")&&""!=a.attr("data-link")&&(a.find(".the-overlay").eq(0).append('<a class="the-overlay-anchor-link" href="'+a.attr("data-link")+'" style="right: '+b+'px;"></a>'),a.find(".the-overlay").eq(0).find(".the-overlay-anchor-link").append('<div class="plus-link"></div>'),b+=31);0<a.find(".the-content").length&&""!=a.find(".the-content").eq(0).html()&&(a.find(".the-overlay").eq(0).append('<a class="the-overlay-anchor-content" style="right: '+b+'px;"></a>'),a.find(".the-overlay").eq(0).find(".the-overlay-anchor-content").append('<div class="plus-content"></div>'));!1==a.find(".the-title").eq(0).parent().hasClass("item-meta")&&(void 0!=a.attr("data-link")&&""!=a.attr("data-link")?a.find(".the-title, .the-desc").wrapAll('<a class="item-meta" href="'+a.attr("data-link")+'"></a>'):a.find(".the-title, .the-desc").wrapAll('<div class="item-meta"></div>'));"skin-blog"==c.settings_skin&&(d=a.find(".the-feature-con").eq(0).height()-70,void 0!=a.find(".item-meta").eq(0).attr("data-inittop")&&(d=parseInt(a.find(".item-meta").eq(0).attr("data-inittop"),10)),a.find(".item-meta").eq(0).css("top",d),a.find(".item-meta").eq(0).attr("data-inittop",d));"skin-boxed"==c.settings_skin&&(0==a.find(".item-meta").length&&a.prepend('<div class="item-meta"></div>'),a.find(".item-meta").eq(0).prepend('<div class="hero-icon"></div>'),void 0!=a.attr("data-color_highlight")&&(a.find(".item-meta").eq(0).find(".hero-icon").css({"background-color":a.attr("data-color_highlight")}),a.css({"border-bottom-color":a.attr("data-color_highlight")})),void 0!=a.attr("data-heroimage")&&a.find(".item-meta").eq(0).find(".hero-icon").css({"background-image":"url("+a.attr("data-heroimage")+")"}),a.hasClass("layout-left")&&(a.find(".item-meta").eq(0).css({}),a.find(".the-feature-con").eq(0).css({width:"auto"})));"on"==c.disable_itemmeta&&a.find(".item-meta").eq(0).hide();a.addClass("portitem").removeClass("portitem-tobe");b=a.attr("data-category");if(void 0!=b&&""!=b){b=b.split(";");for(h=0;h<b.length;h++){the_cat=b[h];e=b[h];void 0!=the_cat&&(the_cat=the_cat.replace(" ","-"),a.addClass("cat-"+the_cat));A=!1;for(j=0;j<r.length;j++)r[j]==e&&(A=!0);!1==A&&r.push(e)}}});if("on"!=x&&"masonry"==c.settings_mode&&1<r.length&&"on"!=c.settings_disableCats){p.prepend('<div class="categories"><div style="display:inline-block;"></div></div>');p.children(".categories").append('<div class="a-category allspark active">All</div>');for(h=0;h<r.length;h++)p.children(".categories").append('<div class="a-category">'+r[h]+"</div>");p.find(".a-category").bind("click",K)}"advancedscroller"==c.settings_mode&&(b.removeClass("skin-default"),b.addClass("advancedscroller skin-white"));"wall"==c.settings_mode&&(b.removeClass("skin-default"),b.addClass("wall"));b.find(".portitem").each(function(){var a=jQuery(this);"slide"==c.settings_clickaction&&(a.find(".the-feature").eq(0).unbind("click"),a.find(".the-feature").eq(0).bind("click",L));"advancedscroller"==c.settings_mode&&a.addClass("item-tobe");"wall"==c.settings_mode&&a.addClass("wall-item")});b.find(".the-overlay-anchor-content").unbind("click",F);b.find(".the-overlay-anchor-content").bind("click",F);b.find(".portitem").unbind("mouseover",s);b.find(".portitem").bind("mouseover",s);b.find(".portitem").unbind("mouseout",s);b.find(".portitem").bind("mouseout",s);"skin-accordion"==c.settings_skin&&(b.find(".portitem").unbind("click",s),b.find(".portitem").bind("click",s));"on"==c.settings_preloadall?(b.find(".items").eq(0).children().each(function(){var a=jQuery(this);if("video"!=a.attr("data-typefeaturedarea")&&"audio"!=a.attr("data-typefeaturedarea")&&"gallery"!=a.attr("data-typefeaturedarea")&&void 0!=a.attr("data-thumbnail")&&""!=a.attr("data-thumbnail")){var b=new Image;b.src=a.attr("data-thumbnail");b.onload=k}else k()}),setTimeout(n,7500)):setTimeout(n,2E3)}function k(){G++;G>=M&&setTimeout(n,1E3)}function n(){"on"!=x&&("masonry"==c.settings_mode&&(void 0!=jQuery.fn.isotope?(t={masonry:{columnWidth:1},layoutMode:"masonry"},b.children(".items").isotope(t),0==b.css("opacity")&&b.animate({opacity:1},2E3)):(window.console&&console.info("dzsportfolio.js - warning: isotope not included"),b.removeClass("is-sortable"),b.addClass("is-not-sortable"))),"advancedscroller"==c.settings_mode&&(b.children(".items").children().addClass("portitem"),void 0!=jQuery.fn.advancedscroller?b.advancedscroller({design_itemwidth:c.item_width}):window.console&&console.info("dzsportfolio.js - warning: advancedscroller not included")),"wall"==c.settings_mode&&(void 0!=jQuery.fn.wall?b.wall(c.wall_settings):window.console&&console.info("dzsportfolio.js - warning: wall not included")),"zoombox"==c.settings_lightboxlibrary&&(void 0!=f.fn.zoomBox?b.find(".zoombox").zoomBox({}):window.console&&console.info("zoombox not here...")),"prettyphoto"==c.settings_lightboxlibrary&&(void 0!=f.fn.prettyPhoto?b.find("a[rel^='prettyPhoto']").prettyPhoto({theme:"pp_default",overlay_gallery:!1,social_tools:false,deeplinking:false}):window.console&&console.info("prettyphoto not here...")),void 0!=b.get(0)&&(b.get(0).fn_change_size=N),b.children(".preloader").fadeOut("slow"),b.addClass("loaded"),jQuery(document).delegate(".btn-close","click",O),"on"==c.settings_ajax_enabled&&("scroll"==c.settings_ajax_loadmoremethod?f(window).bind("scroll",B):(b.append('<div class="btn_ajax_loadmore">Load More</div>'),b.children(".btn_ajax_loadmore").bind("click",P))),jQuery(window).unbind("resize",C),jQuery(window).bind("resize",C),C(),x="on")}function B(){var a=f(this);D=f(window).height();!0==z||u>=c.settings_ajax_pages.length||a.scrollTop()+D>b.offset().top+b.height()-10&&H()}function P(){!0==z||u>=c.settings_ajax_pages.length||H()}function H(){b.children(".preloader").fadeIn("slow");f.ajax({url:c.settings_ajax_pages[u],success:function(a){void 0!=window.console&&console.log("Got this from the server: "+a);setTimeout(function(){b.children(".items").append(a);m();v();setTimeout(function(){z=!1;b.children(".preloader").fadeOut("slow");u++;u>=c.settings_ajax_pages.length&&b.children(".btn_ajax_loadmore").fadeOut("slow");"zoombox"==c.settings_lightboxlibrary&&(void 0!=f.fn.zoomBox?b.find(".zoombox").zoomBox({}):window.console&&console.info("zoombox not here..."));"prettyphoto"==c.settings_lightboxlibrary&&(void 0!=f.fn.prettyPhoto?b.find("a[rel^='prettyPhoto']").prettyPhoto({theme:"pp_default",overlay_gallery:!1,social_tools:false,deeplinking:false}):window.console&&console.info("prettyphoto not here..."))},1E3)},1E3)},error:function(a,c){void 0!=window.console&&console.error("not found "+c);u++;b.children(".preloader").fadeOut("slow")}});z=!0}function N(a,c){void 0!=a&&b.find(".portitem").css({width:a});void 0!=c&&b.find(".portitem").height(c);v()}function v(){"masonry"==c.settings_mode&&(void 0!=jQuery.fn.isotope?(setTimeout(function(){b.children(".items").isotope("reloadItems").isotope("reLayout").isotope(t)},700),setTimeout(function(){b.children(".items").isotope("reloadItems").isotope("reLayout").isotope(t)},1200)):window.console&&console.info("dzsportfolio.js - warning: isotope not included"))}function s(a){var b=jQuery(this);"mouseover"==a.type&&"skin-blog"==c.settings_skin&&b.find(".item-meta").eq(0).css("top",0);if("mouseout"==a.type){var e=b.find(".item-meta").eq(0).attr("data-inittop");-1==String(e).indexOf("px")&&(e+="px");b.find(".item-meta").eq(0).css("top",e)}if("click"==a.type&&!b.hasClass("opened"))return y.children(".portitem").removeClass("opened"),b.addClass("opened"),a.stopPropagation(),a.preventDefault(),0==b.find(".btn-close").length&&b.find(".the-content").eq(0).append('<div class="btn-close">Close</div>'),jQuery(window).trigger("resize"),v(),!1}function O(){var a=jQuery(this);if(0==b.has(a).length)return!1;if("skin-accordion"==c.settings_skin)return a.parent().parent().removeClass("opened"),v(),!1;g.addClass("non-anim");g.css("height",g.height());setTimeout(function(){g.removeClass("non-anim")},100);setTimeout(function(){g.css("height",0)},200);setTimeout(function(){g.html("");g.removeClass("active")},1E3)}function F(){var a=jQuery(this).parent().parent().parent();g.css("height","auto");a=a.find(".the-content").eq(0).html()+'<div class="btn-close">Close</div>';g.html(a);g.addClass("active");var a=scrollableElement("html","body"),b=g.offset().top;f(a).animate({scrollTop:b},400)}function K(){var a=jQuery(this),c=a.html(),e=".cat-"+c;"All"==c&&(e="*");p.find(".a-category").removeClass("active");a.addClass("active");e=("false"===e?!1:e).replace(" ","-");t.filter=e;b.children(".items").isotope(t)}function L(){var a=jQuery(this).parent();b.animate({height:a.children(".the-content").height()},{queue:!1});g.html('<div class="button-back-con"><div class="button-back">back</div><div class="page-title">'+a.find(".the-title").eq(0).html()+"</div></div>"+a.children(".the-content").html());y.css({});g.addClass("focused");g.find(".button-back").bind("click",Q)}function Q(){b.animate({height:y.height()},{queue:!1,complete:R});g.removeClass("focused")}function R(){b.css({height:"auto"})}function C(){f(window).width();D=f(window).height();w=b.width();b.removeClass("under-800").removeClass("under-480");800>w&&b.addClass("under-800");480>w&&b.addClass("under-480");-1<String(b.attr("class")).indexOf("special-grid")&&(clearTimeout(I),I=setTimeout(function(){v();!0==J&&b.find(".portitem").each(function(){var a=jQuery(this);a.find(".the-feature-con").eq(0).css({height:a.find(".the-feature-con").eq(0).outerWidth(!1)*c.design_thumbh})})},100));b.find(".portitem").each(function(){var a=jQuery(this);a.width()>w?(void 0==a.attr("data-origwidth")&&a.attr("data-origwidth",a.css("width")),a.css("width",w)):void 0!=a.attr("data-origwidth")&&a.css("width",a.attr("data-origwidth"))});g.hasClass("active")}var b=f(this),E="";b.children();var M=b.children(".items").children().length,G=0,h=0,D,w,g,y,p,r=[],z=!1,A=!1,t={},I,u=0,q=0,l=0,J=!1,x="off";-1==c.design_item_width.indexOf("%")&&(c.design_item_width=parseInt(c.design_item_width,10));-1==c.design_item_height.indexOf("%")&&(c.design_item_height=parseInt(c.design_item_height,10));-1==c.design_thumbw.indexOf("%")&&(c.design_thumbw=parseInt(c.design_thumbw,10));"on"==c.design_item_height_same_as_width&&(c.design_thumbh="1/1");-1<String(c.design_thumbh).indexOf("/")?(J=!0,c.design_thumbh=eval(c.design_thumbh)):-1==c.design_thumbh.indexOf("%")&&(c.design_thumbh=parseInt(c.design_thumbh,10));E="string"==typeof b.attr("class")?b.attr("class"):b.get(0).className;-1==E.indexOf("skin-")&&b.addClass(c.settings_skin);-1==E.indexOf("-sortable")&&b.addClass("is-sortable");b.hasClass("skin-default")&&(c.settings_skin="skin-default");b.hasClass("skin-black")&&(c.settings_skin="skin-black",skin_tableWidth=192,skin_normalHeight=158);b.hasClass("skin-blog")&&(c.settings_skin="skin-blog");b.hasClass("skin-accordion")&&(c.settings_skin="skin-accordion");b.hasClass("skin-boxed")&&(c.settings_skin="skin-boxed");b.addClass("mode-"+c.settings_mode);m();return this})};window.dzsp_init=function(c,m){f(c).dzsportfolio(m)}})(jQuery);function scrollableElement(f){for(var c=0,m=arguments.length;c<m;c++){var k=arguments[c],n=jQuery(k);if(0<n.scrollTop())return k;n.scrollTop(1);var B=0<n.scrollTop();n.scrollTop(0);if(B)return k}return[]}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f){window.setTimeout(f,1E3/60)}}();